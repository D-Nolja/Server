<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dang.dnolja.review.model.mapper.ReviewMapper">

    <insert id="insertDailyToSpot" parameterType="map">
        INSERT INTO Review (daily_id, spot_id, `order`) VALUES (#{dailyId}, #{spotId}, #{order})
    </insert>


    <update id="updateReviewItem" parameterType="com.dang.dnolja.review.controller.dto.request.ReviewItemRequest">
        update Review
        set img = #{img}, contents=#{contents}
        where review_id = #{reviewId}
    </update>

    <select id="getUserId" parameterType="long" resultType="long">
        select P.user_id
        From Plan P
                 JOIN Daily D ON P.plan_id = D.plan_id
                 JOIN Review R ON R.daily_id = D.daily_id
        where R.review_id = #{reviewId};
    </select>



</mapper>
